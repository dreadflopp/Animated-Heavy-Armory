<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="https://github.com/dreadflopp/fomod-schema/blob/master/ModuleConfig.xsd">
	<moduleName>Animated Heavy Armory - DAR version</moduleName>
	<installSteps order="Explicit">

		<!-- Welcome -->
		<installStep name="Welcome">
			<optionalFileGroups order="Explicit">
				<group name="Choose" type="SelectExactlyOne">
					<plugins order="Explicit">
						<plugin name="Welcome">
							<description>
								<![CDATA[This installer will guide you through the installation of:
								
								* Heavy Armory - a tweaked full version or a tweaked lite version (both optional)
								* Animations for Heavy Armory (each animation is optional)
								* Patches for Heavy Armory and Animated Armoury (optional)§]]>
							</description>
							<conditionFlags>
								<flag name="ha-full">Off</flag>
								<flag name="ha-lite">Off</flag>
								<flag name="aa">Off</flag>
								<flag name="da">Off</flag>
								<flag name="waccf">Off</flag>
								<flag name="ccor">Off</flag>
								<flag name="ha-balance">Off</flag>
								<flag name="aa-balance">Off</flag>
								<flag name="ha-enchanted">Off</flag>
								<flag name="aa-enchanted">Off</flag>
								<flag name="iddp">Off</flag>
								<flag name="ussep">Off</flag>
							</conditionFlags>						
							<typeDescriptor>
								<dependencyType>
									<defaultType name="Recommended"/>
								</dependencyType>
							</typeDescriptor>
						</plugin>
					</plugins>
				</group>
			</optionalFileGroups>
		</installStep>
		
		<!-- Heavy Armory version -->
		<installStep name="Heavy Armory">
			<optionalFileGroups order="Explicit">
				<group name="Choose" type="SelectAtMostOne">
					<plugins order="Explicit">				

						<plugin name="Heavy Armory - Lite">
							<description>
								<![CDATA[The lite verion of Heavy Armory with a few tweaks:
								
								- Halebards have been renamed to Poleaxes since they are shorter than Halebards
								- Keywords added to allow custom animations to be added and to allow SkyUI Weapons pack to show its custom icons for the added weapons.
								- Changes from Unofficial Skyrim Special Edition added as well as a few other small fixes.
								- Quarterstaffs and Tridents has been removed since they have no fitting animation. They are too short for the animation from Animated Armoury to work well.
								
								]]>
							</description>
							<conditionFlags>
								<flag name="ha-lite">On</flag>
							</conditionFlags>							
							<typeDescriptor>
								<dependencyType>
									<defaultType name="Recommended"/>
								</dependencyType>
							</typeDescriptor>
						</plugin>

						<plugin name="Heavy Armory - Full">
							<description>
								<![CDATA[The full verion of Heavy Armory with a few tweaks:
								
								- Halebards have been renamed to Poleaxes since they are shorter than Halebards
								- Keywords added to allow custom animations to be added and to allow SkyUI Weapons pack to show its custom icons for the added weapons.
								- Changes from Unofficial Skyrim Special Edition added as well as a few other small fixes.
								
								]]>
							</description>
							<conditionFlags>
								<flag name="ha-full">On</flag>
							</conditionFlags>							
							<typeDescriptor>
								<dependencyType>
									<defaultType name="Optional"/>
								</dependencyType>
							</typeDescriptor>
						</plugin>

					</plugins>
				</group>
			</optionalFileGroups>
		</installStep>

		<!-- Other weapon mods -->
		<installStep name="Mods">
			<optionalFileGroups order="Explicit">
				<group name="Choose" type="SelectAny">
					<plugins order="Explicit">				

						<plugin name="Animated Armoury - DAR version">
							<description>
								<![CDATA[Choose this if you use Animated Armoury - DAR version.]]>
							</description>
							<conditionFlags>
								<flag name="aa">On</flag>
							</conditionFlags>							
							<typeDescriptor>
								<dependencyType>
									<defaultType name="Optional"/>
									<patterns>
										<pattern>
											<dependencies operator="And">
												<fileDependency file="NewArmoury.esp" state="Active"/>
											</dependencies>
											<type name="Recommended"/>
										</pattern>
									</patterns>
								</dependencyType>
							</typeDescriptor>
						</plugin>

						<plugin name="Dawnguard Arsenal">
							<description>
								<![CDATA[Choose this if you use Dawwnguard Arsenal.]]>
							</description>
							<conditionFlags>
								<flag name="da">On</flag>
							</conditionFlags>							
							<typeDescriptor>
								<dependencyType>
									<defaultType name="Optional"/>
									<patterns>
										<pattern>
											<dependencies operator="And">
												<fileDependency file="DawnguardArsenal.esp" state="Active"/>
											</dependencies>
											<type name="Recommended"/>
										</pattern>
									</patterns>
								</dependencyType>
							</typeDescriptor>
						</plugin>

					</plugins>
				</group>
			</optionalFileGroups>
		</installStep>

		<!-- WACCF and CCOR -->
		<installStep name="WACCF and CCOR">
			<optionalFileGroups order="Explicit">
				<group name="Choose" type="SelectAtMostOne">
					<plugins order="Explicit">
						<plugin name="Weapons Armor Clothing and Clutter Fixes">
							<description>
								<![CDATA[This will install patches for Weapons Armor Clothing Clutter Fixes(WACCF). Please note that neither High-Level Loot Rarified or the balance patches are compatible with WACCF and the install step for them will be skiped.]]>
							</description>
							<conditionFlags>
								<flag name="waccf">On</flag>
							</conditionFlags>							
							<typeDescriptor>
								<dependencyType>
									<defaultType name="Optional"/>
									<patterns>
										<pattern>
											<dependencies operator="And">
												<flagDependency flag="Weapons Armor Clothing &amp; Clutter Fixes.esp" state="Active"/>
											</dependencies>
											<type name="Recommended"/>
										</pattern>
									</patterns>
								</dependencyType>
							</typeDescriptor>
						</plugin>

						<plugin name="Weapons Armor Clothing and Clutter Fixes + Complete Crafting Overhaul Remastered">
							<description>
								<![CDATA[This will install patches for Weapons Armor Clothing Clutter Fixes(WACCF) and Complete Crafting Overhaul Remastered(CCOR). Please note that neither High-Level Loot Rarified or the balance patches are compatible with WACCF or CCOR and the install step for them will be skiped.]]>
							</description>
							<conditionFlags>
								<flag name="waccf">On</flag>
								<flag name="ccor">On</flag>
							</conditionFlags>							
							<typeDescriptor>
								<dependencyType>
									<defaultType name="Optional"/>
									<patterns>
										<pattern>
											<dependencies operator="And">
												<fileDependency file="Complete Crafting Overhaul_Remastered.esp" state="Active"/>
											</dependencies>
											<type name="Recommended"/>
										</pattern>
									</patterns>
								</dependencyType>
							</typeDescriptor>
						</plugin>
					</plugins>
				</group>
			</optionalFileGroups>
		</installStep>

		<!-- Balance tweaks -->
		<installStep name="Balance">
			<visible>
				<dependencies operator="And">
					<flagDependency flag="waccf" value="off"/>
				</dependencies>
			</visible>
			<optionalFileGroups order="Explicit">
				<group name="Choose" type="SelectAtAny">
					<plugins order="Explicit">

						<plugin name="Heavy Armory Balance tweaks">
							<description>
								<![CDATA[This will install balancing tweaks for Heavy Armory.]]>
							</description>
							<conditionFlags>
								<flag name="ha-balance">On</flag>
							</conditionFlags>							
							<typeDescriptor>
								<dependencyType>
									<defaultType name="Optional"/>
									<patterns>
										<pattern>
											<dependencies operator="Or">
												<flagDependency flag="ha-full" value="On"/>
												<flagDependency flag="ha-lite" value="On"/>
											</dependencies>
											<type name="Recommended"/>
										</pattern>
									</patterns>
								</dependencyType>
							</typeDescriptor>
						</plugin>

						<plugin name="Animated Armoury Balance tweaks">
							<description>
								<![CDATA[This will install balancing tweaks for Animated Armoury.]]>
							</description>
							<conditionFlags>
								<flag name="aa-balance">On</flag>
							</conditionFlags>							
							<typeDescriptor>
								<dependencyType>
									<defaultType name="Optional"/>
									<patterns>
										<pattern>
											<dependencies operator="Or">
												<flagDependency flag="aa" value="On"/>
											</dependencies>
											<type name="Recommended"/>
										</pattern>
									</patterns>
								</dependencyType>
							</typeDescriptor>
						</plugin>

					</plugins>
				</group>
			</optionalFileGroups>
		</installStep>

		<!-- Enchanted versions -->
		<!--
		<installStep name="Enchanted addons">
			<optionalFileGroups order="Explicit">
				<group name="Choose" type="SelectAtAny">
					<plugins order="Explicit">

						<plugin name="Heavy Armory Enchanted Addon">
							<description>
								<![CDATA[This will install Enchanted versions of Heavy Armory's weapons. They will include changes from the balance tweaks or from WACCF/CCOR, depending on your choice from previous steps.]]>
							</description>
							<conditionFlags>
								<flag name="ha-enchanted">On</flag>
							</conditionFlags>							
							<typeDescriptor>
								<dependencyType>
									<defaultType name="Optional"/>
									<patterns>
										<pattern>
											<dependencies operator="Or">
												<flagDependency flag="ha-full" value="On"/>
												<flagDependency flag="ha-lite" value="On"/>
											</dependencies>
											<type name="Recommended"/>
										</pattern>
									</patterns>
								</dependencyType>
							</typeDescriptor>
						</plugin>

						<plugin name="Animated Armoury Enchanted Addon">
							<description>
								<![CDATA[This will install Enchanted versions of Animated Armoury's weapons. They will include changes from the balance tweaks or from WACCF/CCOR, depending on your choice from previous steps.]]>
							</description>
							<conditionFlags>
								<flag name="aa-enchanted">On</flag>
							</conditionFlags>							
							<typeDescriptor>
								<dependencyType>
									<defaultType name="Optional"/>
									<patterns>
										<pattern>
											<dependencies operator="Or">
												<fileDependency file="NewArmoury.esp" state="Active"/>
											</dependencies>
											<type name="Recommended"/>
										</pattern>
									</patterns>
								</dependencyType>
							</typeDescriptor>
						</plugin>

					</plugins>
				</group>
			</optionalFileGroups>
		</installStep>
		-->

		<!-- Other mods -->
		<installStep name="Other mods">
			<optionalFileGroups order="Explicit">
				<group name="Choose the mods you use" type="SelectAny">
					<plugins order="Explicit">

						<plugin name="Ars Metallica">
							<description>
								<![CDATA[This will install Ars Metallica patches for Animated Armoury, Heavy Armory and Dawnguard Arsenal, depending on previous selections. This includes breakdown recipes for Animated Armoury and Heavy Armory. Dawnguard Arsenal users should use the Ars Metallica patch from Dawnguard Arsenals necus page to complement this patch and to get Breakdown Recipes.]]>
							</description>
							<conditionFlags>
								<flag name="am">On</flag>
							</conditionFlags>						
							<typeDescriptor>
								<dependencyType>
									<defaultType name="Optional"/>
									<patterns>
										<pattern>
											<dependencies operator="And">
												<fileDependency file="Ars Metallica.esp" state="Active"/>
											</dependencies>
											<type name="Recommended"/>
										</pattern>
									</patterns>
								</dependencyType>
							</typeDescriptor>
						</plugin>
						
						<plugin name="Immersive Dawnguard Dayspring Pass SE">
							<conditionFlags>
								<flag name="iddp">On</flag>
							</conditionFlags>						
							<typeDescriptor>
								<dependencyType>
									<defaultType name="Optional"/>
									<patterns>
										<pattern>
											<dependencies operator="And">
												<fileDependency file="AHZBetterDGEntranceSE.esp" state="Active"/>
											</dependencies>
											<type name="Recommended"/>
										</pattern>
									</patterns>
								</dependencyType>
							</typeDescriptor>
						</plugin>

						<plugin name="Unofficial Skyrim Special Edition Patch">
							<conditionFlags>
								<flag name="ussep">On</flag>
							</conditionFlags>						
							<typeDescriptor>
								<dependencyType>
									<defaultType name="Optional"/>
									<patterns>
										<pattern>
											<dependencies operator="And">
												<fileDependency file="Unofficial Skyrim Special Edition Patch.esp" state="Active"/>
											</dependencies>
											<type name="Recommended"/>
										</pattern>
									</patterns>
								</dependencyType>
							</typeDescriptor>
						</plugin>

					</plugins>
				</group>
			</optionalFileGroups>
		</installStep>
	</installSteps>
	
	<!-- ****************************** -->
	<!-- ****** Install patterns ****** -->
	<!-- ****************************** -->
	<conditionalFileInstalls>
		<patterns>

			<!-- Heavy Armory Version -->
			<pattern>
				<dependencies operator="And">
					<flagDependency flag="ha-full" value="On"/>
					<flagDependency flag="ha-lite" value="Off"/>
				</dependencies>
				<files>
					<file source="heavy armory/heavy armory - full/PrvtI_HeavyArmory.esp" destination="PrvtI_HeavyArmory.esp" priority="0" />
					<file source="heavy armory/meshes/PrvtI_HeavyArmory.bsa" destination="PrvtI_HeavyArmory.bsa" priority="0" />
				</files>
			</pattern>
			<pattern>
				<dependencies operator="And">
					<flagDependency flag="ha-full" value="Off"/>
					<flagDependency flag="ha-lite" value="On"/>
				</dependencies>
				<files>
					<file source="heavy armory/heavy armory - lite/PrvtI_HeavyArmory.esp" destination="PrvtI_HeavyArmory.esp" priority="0" />
					<file source="heavy armory/meshes/PrvtI_HeavyArmory.bsa" destination="PrvtI_HeavyArmory.bsa" priority="0" />
				</files>
			</pattern>

			<!-- waccf - ccor -->
			<pattern>
				<dependencies operator="And">
					<flagDependency flag="ha-full" value="On"/>
					<flagDependency flag="ha-lite" value="Off"/>
					<flagDependency flag="waccf" value="On"/>
					<flagDependency flag="ccor" value="Off"/>
				</dependencies>
				<files>
					<file source="patches/waccf-ccor/ha-full/HeavyArmory-WACCF_patch.esp" destination="HeavyArmory-WACCF_patch.esp" priority="0" />
				</files>
			</pattern>
			<pattern>
				<dependencies operator="And">
					<flagDependency flag="ha-full" value="On"/>
					<flagDependency flag="ha-lite" value="Off"/>
					<flagDependency flag="waccf" value="On"/>
					<flagDependency flag="ccor" value="On"/>
				</dependencies>
				<files>
					<file source="patches/waccf-ccor/ha-full/HeavyArmory-WACCF-CCOR_patch.esp" destination="HeavyArmory-WACCF-CCOR_patch.esp" priority="0" />
				</files>
			</pattern>
			<pattern>
				<dependencies operator="And">
					<flagDependency flag="ha-full" value="Off"/>
					<flagDependency flag="ha-lite" value="On"/>
					<flagDependency flag="waccf" value="On"/>
					<flagDependency flag="ccor" value="Off"/>
				</dependencies>
				<files>
					<file source="patches/waccf-ccor/ha-lite/HeavyArmory-WACCF_patch.esp" destination="HeavyArmory-WACCF_patch.esp" priority="0" />
				</files>
			</pattern>
			<pattern>
				<dependencies operator="And">
					<flagDependency flag="ha-full" value="Off"/>
					<flagDependency flag="ha-lite" value="On"/>
					<flagDependency flag="waccf" value="On"/>
					<flagDependency flag="ccor" value="On"/>
				</dependencies>
				<files>
					<file source="patches/waccf-ccor/ha-lite/HeavyArmory-WACCF-CCOR_patch.esp" destination="HeavyArmory-WACCF-CCOR_patch.esp" priority="0" />
				</files>
			</pattern>
			<pattern>
				<dependencies operator="And">
					<flagDependency flag="aa" value="On"/>
					<flagDependency flag="waccf" value="On"/>
					<flagDependency flag="ccor" value="Off"/>
				</dependencies>
				<files>
					<file source="patches/waccf-ccor/AnimatedArmoury-WACCF_patch.esp" destination="AnimatedArmoury-WACCF_patch.esp" priority="0" />
				</files>
			</pattern>
			<pattern>
				<dependencies operator="And">
					<flagDependency flag="aa" value="On"/>
					<flagDependency flag="waccf" value="On"/>
					<flagDependency flag="ccor" value="On"/>
				</dependencies>
				<files>
					<file source="patches/waccf-ccor/AnimatedArmory-WACCF-CCOR_patch.esp" destination="AnimatedArmory-WACCF-CCOR_patch.esp" priority="0" />
				</files>
			</pattern>
			<pattern>
				<dependencies operator="And">
					<flagDependency flag="ha-full" value="On"/>
					<flagDependency flag="ha-lite" value="Off"/>
					<flagDependency flag="aa" value="On"/>
					<flagDependency flag="waccf" value="On"/>
					<flagDependency flag="ccor" value="Off"/>
				</dependencies>
				<files>
					<file source="patches/waccf-ccor/ha-full/HeavyArmory-AnimatedArmoury-WACCF_lvlist-patch.esp" destination="HeavyArmory-AnimatedArmoury-WACCF_lvlist-patch.esp" priority="0" />
				</files>
			</pattern>
			<pattern>
				<dependencies operator="And">
					<flagDependency flag="ha-full" value="On"/>
					<flagDependency flag="ha-lite" value="Off"/>
					<flagDependency flag="aa" value="On"/>
					<flagDependency flag="waccf" value="On"/>
					<flagDependency flag="ccor" value="Off"/>
				</dependencies>
				<files>
					<file source="patches/waccf-ccor/ha-full/HeavyArmory-AnimatedArmoury-WACCF-CCOR_lvlist-patch.esp" destination="HeavyArmory-AnimatedArmoury-WACCF-CCOR_lvlist-patch.esp" priority="0" />
				</files>
			</pattern>
			<pattern>
				<dependencies operator="And">
					<flagDependency flag="ha-full" value="Off"/>
					<flagDependency flag="ha-lite" value="On"/>
					<flagDependency flag="aa" value="On"/>
					<flagDependency flag="waccf" value="On"/>
					<flagDependency flag="ccor" value="Off"/>
				</dependencies>
				<files>
					<file source="patches/waccf-ccor/ha-lite/HeavyArmory-AnimatedArmoury-WACCF_lvlist-patch.esp" destination="HeavyArmory-AnimatedArmoury-WACCF_lvlist-patch.esp" priority="0" />
				</files>
			</pattern>
			<pattern>
				<dependencies operator="And">
					<flagDependency flag="ha-full" value="Off"/>
					<flagDependency flag="ha-lite" value="On"/>
					<flagDependency flag="aa" value="On"/>
					<flagDependency flag="waccf" value="On"/>
					<flagDependency flag="ccor" value="Off"/>
				</dependencies>
				<files>
					<file source="patches/waccf-ccor/ha-lite/HeavyArmory-AnimatedArmoury-WACCF-CCOR_lvlist-patch.esp" destination="HeavyArmory-AnimatedArmoury-WACCF-CCOR_lvlist-patch.esp" priority="0" />
				</files>
			</pattern>

			<!-- Balance tweaks -->

			<!-- Other patches -->









			<!-- Main + Addons -->
			<pattern>
				<dependencies operator="And">
					<flagDependency flag="aa" value="On"/>
					<flagDependency flag="ha" value="On"/>
				</dependencies>
				<files>
					<file source="patches/HLLR - Animated Armoury and Heavy Armoury Patch.esp" destination="HLLR - Animated Armoury and Heavy Armoury Patch.esp" priority="0" />
				</files>
			</pattern>	

			<!-- Ars Metallica -->
			<pattern>
				<dependencies operator="And">
					<flagDependency flag="aa" value="On"/>
					<flagDependency flag="ha" value="Off"/>
					<flagDependency flag="am" value="On"/>
				</dependencies>
				<files>
					<file source="patches/HLLR - Animated Armory - Ars Metallica Patch.esp" destination="HLLR - Animated Armory - Ars Metallica Patch.esp" priority="0" />
				</files>
			</pattern>	
			<pattern>
				<dependencies operator="And">
					<flagDependency flag="aa" value="Off"/>
					<flagDependency flag="ha" value="On"/>
					<flagDependency flag="am" value="On"/>
				</dependencies>
				<files>
					<file source="patches/HLLR - Heavy Armory - Ars Metallica Patch.esp" destination="HLLR - Heavy Armory - Ars Metallica Patch.esp" priority="0" />
				</files>
			</pattern>	
			<pattern>
				<dependencies operator="And">
					<flagDependency flag="aa" value="On"/>
					<flagDependency flag="ha" value="On"/>
					<flagDependency flag="am" value="On"/>
				</dependencies>
				<files>
					<file source="patches/HLLR - Animated Armory and Heavy Armory - Ars Metallica Patch.esp" destination="HLLR - Animated Armory and Heavy Armory - Ars Metallica Patch.esp" priority="0" />
				</files>
			</pattern>	

			<!-- Dawnguard Arsenal -->
			<pattern>
				<dependencies operator="And">
					<flagDependency flag="aa" value="On"/>
					<flagDependency flag="ha" value="Off"/>
					<flagDependency flag="da" value="On"/>
				</dependencies>
				<files>
					<file source="patches/HLLR - Animated Armoury and Dawnguard Arsenal Patch.esp" destination="HLLR - Animated Armoury and Dawnguard Arsenal Patch.esp" priority="0" />
				</files>
			</pattern>	
			<pattern>
				<dependencies operator="And">
					<flagDependency flag="aa" value="Off"/>
					<flagDependency flag="ha" value="On"/>
					<flagDependency flag="da" value="On"/>
				</dependencies>
				<files>
					<file source="patches/HLLR - Heavy Armoury and Dawnguard Arsenal Patch.esp" destination="HLLR - Heavy Armoury and Dawnguard Arsenal Patch.esp" priority="0" />
				</files>
			</pattern>
			<pattern>
				<dependencies operator="And">
					<flagDependency flag="aa" value="On"/>
					<flagDependency flag="aa" value="On"/>
					<flagDependency flag="da" value="On"/>
				</dependencies>
				<files>
					<file source="patches/HLLR - Animated Armoury Heavy Armory and Dawnguard Arsenal Patch.esp" destination="HLLR - Animated Armoury Heavy Armory and Dawnguard Arsenal Patch.esp" priority="0" />
				</files>
			</pattern>
		</patterns>
	</conditionalFileInstalls>
</config>
