<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="https://github.com/dreadflopp/fomod-schema/blob/master/ModuleConfig.xsd">
	<moduleName>Animated Heavy Armory - DAR version</moduleName>
	<installSteps order="Explicit">

		<!-- Welcome -->
		<installStep name="Welcome">
			<optionalFileGroups order="Explicit">
				<group name="Choose" type="SelectExactlyOne">
					<plugins order="Explicit">
						<plugin name="Welcome">
							<description>
								<![CDATA[This installer will guide you through the installation of:
								
								* Heavy Armory - a tweaked full standalone version or a tweaked lite standalone version (both optional)
								* Animations for Heavy Armory (each animation is optional)
								* Patches]]>
							</description>
							<conditionFlags>
								<flag name="ha-full">Off</flag>
								<flag name="ha-lite">Off</flag>
								<flag name="waccf">Off</flag>
								<flag name="ccor">Off</flag>
								<flag name="balance">Off</flag>
								<flag name="ha-waccf">Off</flag>
								<flag name="ha-ccor">Off</flag>
								<flag name="aa-waccf">Off</flag>
								<flag name="aa-ccor">Off</flag>
								<flag name="ha-aa-lvl">Off</flag>
							</conditionFlags>						
							<typeDescriptor>
								<dependencyType>
									<defaultType name="Recommended"/>
								</dependencyType>
							</typeDescriptor>
						</plugin>
					</plugins>
				</group>
			</optionalFileGroups>
		</installStep>
		
		<!-- Heavy Armory version -->
		<installStep name="Heavy Armory">
			<optionalFileGroups order="Explicit">
				<group name="Choose" type="SelectExactlyOne">
					<plugins order="Explicit">				

						<plugin name="Heavy Armory - Lite">
							<description>
								<![CDATA[The lite verion of Heavy Armory with a few tweaks:
								
								- Halebards have been renamed to Poleaxes since they are shorter than Halebards
								- Keywords added to allow custom animations to be added and to allow SkyUI Weapons pack to show its custom icons for the added weapons.
								- Changes from Unofficial Skyrim Special Edition added as well as a few other small fixes.
								- Quarterstaffs and Tridents has been removed since they have no fitting animation. They are too short for the animation from Animated Armoury to work well.
								
								]]>
							</description>
							<conditionFlags>
								<flag name="ha-lite">On</flag>
							</conditionFlags>
							<files>
								<file source="heavy armory/heavy armory - lite/PrvtI_HeavyArmory.esp" destination="PrvtI_HeavyArmory.esp" priority="0" />
								<file source="heavy armory/meshes/PrvtI_HeavyArmory.bsa" destination="PrvtI_HeavyArmory.bsa" priority="0" />
							</files>						
							<typeDescriptor>
								<dependencyType>
									<defaultType name="Recommended"/>
								</dependencyType>
							</typeDescriptor>
						</plugin>

						<plugin name="Heavy Armory - Full">
							<description>
								<![CDATA[The full verion of Heavy Armory with a few tweaks:
								
								- Halebards have been renamed to Poleaxes since they are shorter than Halebards
								- Keywords added to allow custom animations to be added and to allow SkyUI Weapons pack to show its custom icons for the added weapons.
								- Changes from Unofficial Skyrim Special Edition added as well as a few other small fixes.
								
								]]>
							</description>
							<conditionFlags>
								<flag name="ha-full">On</flag>
							</conditionFlags>		
							<files>
								<file source="heavy armory/heavy armory - full/PrvtI_HeavyArmory.esp" destination="PrvtI_HeavyArmory.esp" priority="0" />
								<file source="heavy armory/meshes/PrvtI_HeavyArmory.bsa" destination="PrvtI_HeavyArmory.bsa" priority="0" />
							</files>					
							<typeDescriptor>
								<dependencyType>
									<defaultType name="Optional"/>
								</dependencyType>
							</typeDescriptor>
						</plugin>

						<plugin name="None">
							<description>
								<![CDATA[Do not install Heavy Armory.
								
								]]>
							</description>				
							<typeDescriptor>
								<dependencyType>
									<defaultType name="Optional"/>
								</dependencyType>
							</typeDescriptor>
						</plugin>

					</plugins>
				</group>
			</optionalFileGroups>
		</installStep>

		<installStep name="Weapon Tweaks">

			<optionalFileGroups order="Explicit">
				<group name="Choose" type="SelectExactlyOne">
					<plugins order="Explicit">				

						<plugin name="Balance Tweaks">
							<description>
								<![CDATA[Balance tweaks (nerfs) for Heavy Armory and/or Animated Armoury to make them play well with each other and vanilla Skyrim.]]>
							</description>
							<conditionFlags>
								<flag name="balance">On</flag>
							</conditionFlags>							
							<typeDescriptor>
								<dependencyType>
									<defaultType name="Optional"/>
									<patterns>
										<pattern>
											<dependencies operator="Or">
												<fileDependency file="NewArmoury.esp" state="Active"/>
												<flagDependency flag="ha-full" value="On"/>
												<flagDependency flag="ha-lite" value="On"/>
											</dependencies>
											<type name="Recommended"/>
										</pattern>
									</patterns>
								</dependencyType>
							</typeDescriptor>
						</plugin>

						<plugin name="Weapons Armor Clothing and Clutter Fixes">
							<description>
								<![CDATA[Choose this if you plan to use Weapons Armor Clothing and Clutter Fixes.]]>
							</description>
							<conditionFlags>
								<flag name="waccf">On</flag>
							</conditionFlags>							
							<typeDescriptor>
								<dependencyType>
									<defaultType name="Optional"/>
									<patterns>
										<pattern>
											<dependencies operator="And">
												<fileDependency file="Weapons Armor Clothing &amp; Clutter Fixes.esp" state="Active"/>
											</dependencies>
											<type name="Recommended"/>
										</pattern>
									</patterns>
								</dependencyType>
							</typeDescriptor>
						</plugin>

						<plugin name="Weapons Armor Clothing and Clutter Fixes">
							<description>
								<![CDATA[Choose this if you plan to use Weapons Armor Clothing and Clutter Fixes and Complete Crafting Overhaul Remastered.]]>
							</description>
							<conditionFlags>
								<flag name="waccf">On</flag>
								<flag name="ccor">On</flag>
							</conditionFlags>							
							<typeDescriptor>
								<dependencyType>
									<defaultType name="Optional"/>
									<patterns>
										<pattern>
											<dependencies operator="And">
												<fileDependency file="<fileDependency file="Complete Crafting Overhaul_Remastered.esp" state="Active"/>"/>
											</dependencies>
											<type name="Recommended"/>
										</pattern>
									</patterns>
								</dependencyType>
							</typeDescriptor>
						</plugin>

						<plugin name="None">
							<description>
								<![CDATA[]]>
							</description>				
							<typeDescriptor>
								<dependencyType>
									<defaultType name="Optional"/>
								</dependencyType>
							</typeDescriptor>
						</plugin>

					</plugins>
				</group>
			</optionalFileGroups>
		</installStep>

		
		<!-- Balance tweaks -->
		<installStep name="Balance Tweaks">
			<visible>
				<dependencies operator="And">
					<flagDependency flag="balance" value="on"/>
				</dependencies>
			</visible>
			<optionalFileGroups order="Explicit">
				<group name="Choose" type="SelectAny">
					<plugins order="Explicit">

						<plugin name="Heavy Armory Balance tweaks">
							<description>
								<![CDATA[This will install balancing tweaks for Heavy Armory.]]>
							</description>
							<files>
								<file source="balance tweaks/Heavy Armory Balance Tweaks.esp" destination="Heavy Armory Balance Tweaks.esp" priority="0" />
							</files>						
							<typeDescriptor>
								<dependencyType>
									<defaultType name="Optional"/>
									<patterns>
										<pattern>
											<dependencies operator="Or">
												<flagDependency flag="ha-full" value="On"/>
												<flagDependency flag="ha-lite" value="On"/>
											</dependencies>
											<type name="Recommended"/>
										</pattern>
									</patterns>
								</dependencyType>
							</typeDescriptor>
						</plugin>

						<plugin name="Animated Armoury Balance tweaks">
							<description>
								<![CDATA[This will install balancing tweaks for Animated Armoury.]]>
							</description>
							<files>
								<file source="balance tweaks/Animated Armoury - Balance Tweaks.esp" destination="Animated Armoury - Balance Tweaks.esp" priority="0" />
							</files>						
							<typeDescriptor>
								<dependencyType>
									<defaultType name="Optional"/>
									<patterns>
										<pattern>
											<dependencies operator="Or">
												<fileDependency file="NewArmoury.esp" state="Active"/>
											</dependencies>
											<type name="Recommended"/>
										</pattern>
									</patterns>
								</dependencyType>
							</typeDescriptor>
						</plugin>

					</plugins>
				</group>
			</optionalFileGroups>
		</installStep>

		<!-- WACCF  -->
		<installStep name="WACCF">
			<visible>
				<dependencies operator="And">
					<flagDependency flag="waccf" value="On"/>
					<flagDependency flag="ccor" value="Off"/>
				</dependencies>
			</visible>
			<optionalFileGroups order="Explicit">
				<group name="Choose" type="SelectAny">
					<plugins order="Explicit">

						<plugin name="Heavy Armory - WACCF patch">
							<description>
								<![CDATA[Patch for Weapons Armor Clothing and Clutter Fixes, without Complete Crafting Overhaul Remastered.]]>
							</description>							
							<conditionFlags>
								<flag name="ha-waccf">On</flag>
							</conditionFlags>			
							<typeDescriptor>
								<dependencyType>
									<defaultType name="Optional"/>
									<patterns>
										<pattern>
											<dependencies operator="Or">
												<flagDependency flag="ha-full" value="On"/>
												<flagDependency flag="ha-lite" value="On"/>
											</dependencies>
											<type name="Recommended"/>
										</pattern>
									</patterns>
								</dependencyType>
							</typeDescriptor>
						</plugin>

						<plugin name="Animated Armoury - WACCF patch">
							<description>
								<![CDATA[Patch for Weapons Armor Clothing and Clutter Fixes, without Complete Crafting Overhaul Remastered.]]>
							</description>
							<conditionFlags>
								<flag name="aa-waccf">On</flag>
							</conditionFlags>
							<files>
								<file source="patches/waccf-ccor/AnimatedArmoury-WACCF_patch.esp" destination="AnimatedArmoury-WACCF_patch.esp" priority="0" />
							</files>					
							<typeDescriptor>
								<dependencyType>
									<defaultType name="Optional"/>
									<patterns>
										<pattern>
											<dependencies operator="And">
												<fileDependency file="NewArmoury.esp" state="Active"/>
											</dependencies>
											<type name="Recommended"/>
										</pattern>
									</patterns>
								</dependencyType>
							</typeDescriptor>
						</plugin>

					</plugins>
				</group>
			</optionalFileGroups>
		</installStep>

		<!-- WACCF + CCOR -->
		<installStep name="WACCF and CCOR">
			<visible>
				<dependencies operator="And">
					<flagDependency flag="waccf" value="On"/>
					<flagDependency flag="ccor" value="On"/>
				</dependencies>
			</visible>
			<optionalFileGroups order="Explicit">
				<group name="Choose" type="SelectAny">
					<plugins order="Explicit">

						<plugin name="Heavy Armory - WACCF+CCOR patch">
							<description>
								<![CDATA[Patch for Weapons Armor Clothing and Clutter Fixes and Complete Crafting Overhaul Remastered.]]>
							</description>							
							<conditionFlags>
								<flag name="ha-waccf">On</flag>
								<flag name="ha-ccor">On</flag>
							</conditionFlags>			
							<typeDescriptor>
								<dependencyType>
									<defaultType name="Optional"/>
									<patterns>
										<pattern>
											<dependencies operator="Or">
												<flagDependency flag="ha-full" value="On"/>
												<flagDependency flag="ha-lite" value="On"/>
											</dependencies>
											<type name="Recommended"/>
										</pattern>
									</patterns>
								</dependencyType>
							</typeDescriptor>
						</plugin>

						<plugin name="Animated Armoury - WACCF+CCOR patch">
							<description>
								<![CDATA[Patch for Weapons Armor Clothing and Clutter Fixes and Complete Crafting Overhaul Remastered.]]>
							</description>
							<conditionFlags>
								<flag name="aa-waccf">On</flag>
								<flag name="aa-ccor">On</flag>
							</conditionFlags>
							<files>
								<file source="patches/waccf-ccor/AnimatedArmory-WACCF-CCOR_patch.esp" destination="AnimatedArmory-WACCF-CCOR_patch.esp" priority="0" />
							</files>					
							<typeDescriptor>
								<dependencyType>
									<defaultType name="Optional"/>
									<patterns>
										<pattern>
											<dependencies operator="And">
												<fileDependency file="NewArmoury.esp" state="Active"/>
											</dependencies>
											<type name="Recommended"/>
										</pattern>
									</patterns>
								</dependencyType>
							</typeDescriptor>
						</plugin>

					</plugins>
				</group>
			</optionalFileGroups>
		</installStep>

		<!-- Ars Metallica -->

		<!-- Level list patches -->
				<installStep name="Level list patch">
			<visible>
				<dependencies operator="And">
					<flagDependency flag="aa-waccf" value="On"/>
					<flagDependency flag="ha-waccf" value="On"/>
				</dependencies>
			</visible>
			<optionalFileGroups order="Explicit">
				<group name="Choose" type="SelectExactlyOne">
					<plugins order="Explicit">

						<plugin name="Heavy Armory - Animated Armoury lvl list patch">
							<description>
								<![CDATA[Conflict resolution for level lists. Not needed if you use a Bashed Patch.]]>
							</description>
							<conditionFlags>
								<flag name="ha-aa-lvl">On</flag>
							</conditionFlags>	
							<typeDescriptor>
								<dependencyType>
									<defaultType name="Recommended"/>
								</dependencyType>
							</typeDescriptor>
						</plugin>

						<plugin name="None">
							<description>
								<![CDATA[Make sure to use a Bashed Patch.]]>
							</description>
							<conditionFlags>
								<flag name="ha-aa-lvl">Off</flag>
							</conditionFlags>	
							<typeDescriptor>
								<dependencyType>
									<defaultType name="Optional"/>
								</dependencyType>
							</typeDescriptor>
						</plugin>

					</plugins>
				</group>
			</optionalFileGroups>
		</installStep>


		<installStep name="Level list patches">
			<visible>
				<dependencies operator="And">
					<flagDependency flag="waccf" value="On"/>
					<flagDependency flag="ccor" value="On"/>
				</dependencies>
			</visible>
			<optionalFileGroups order="Explicit">
				<group name="Choose" type="SelectAny">
					<plugins order="Explicit">



					</plugins>
				</group>
			</optionalFileGroups>
		</installStep>

		
		<!-- Enchanted versions -->
		<!--
		<installStep name="Enchanted addons">
			<optionalFileGroups order="Explicit">
				<group name="Choose" type="SelectAtAny">
					<plugins order="Explicit">

						<plugin name="Heavy Armory Enchanted Addon">
							<description>
								<![CDATA[This will install Enchanted versions of Heavy Armory's weapons. They will include changes from the balance tweaks or from WACCF/CCOR, depending on your choice from previous steps.]]>
							</description>
							<conditionFlags>
								<flag name="ha-enchanted">On</flag>
							</conditionFlags>							
							<typeDescriptor>
								<dependencyType>
									<defaultType name="Optional"/>
									<patterns>
										<pattern>
											<dependencies operator="Or">
												<flagDependency flag="ha-full" value="On"/>
												<flagDependency flag="ha-lite" value="On"/>
											</dependencies>
											<type name="Recommended"/>
										</pattern>
									</patterns>
								</dependencyType>
							</typeDescriptor>
						</plugin>

						<plugin name="Animated Armoury Enchanted Addon">
							<description>
								<![CDATA[This will install Enchanted versions of Animated Armoury's weapons. They will include changes from the balance tweaks or from WACCF/CCOR, depending on your choice from previous steps.]]>
							</description>
							<conditionFlags>
								<flag name="aa-enchanted">On</flag>
							</conditionFlags>							
							<typeDescriptor>
								<dependencyType>
									<defaultType name="Optional"/>
									<patterns>
										<pattern>
											<dependencies operator="Or">
												<fileDependency file="NewArmoury.esp" state="Active"/>
											</dependencies>
											<type name="Recommended"/>
										</pattern>
									</patterns>
								</dependencyType>
							</typeDescriptor>
						</plugin>

					</plugins>
				</group>
			</optionalFileGroups>
		</installStep>
		-->
	
	<!-- ****************************** -->
	<!-- ****** Install patterns ****** -->
	<!-- ****************************** -->
	<conditionalFileInstalls>
		<patterns>

			<pattern>
				<dependencies operator="And">
					<flagDependency flag="ha-waccf" value="On"/>
					<flagDependency flag="ha-ccor" value="Off"/>
					<flagDependency flag="ha-full" value="On"/>
				</dependencies>
				<files>
					<file source="patches/waccf-ccor/ha-full/HeavyArmory-WACCF_patch.esp" destination="HeavyArmory-WACCF_patch.esp" priority="0" />
				</files>
			</pattern>
			<pattern>
				<dependencies operator="And">
					<flagDependency flag="ha-waccf" value="On"/>
					<flagDependency flag="ha-ccor" value="Off"/>
					<flagDependency flag="ha-lite" value="On"/>
				</dependencies>
				<files>
					<file source="patches/waccf-ccor/ha-lite/HeavyArmory-WACCF_patch.esp" destination="HeavyArmory-WACCF_patch.esp" priority="0" />
				</files>
			</pattern>
			<pattern>
				<dependencies operator="And">
					<flagDependency flag="ha-waccf" value="On"/>
					<flagDependency flag="ha-ccor" value="On"/>
					<flagDependency flag="ha-full" value="On"/>
				</dependencies>
				<files>
					<file source="patches/waccf-ccor/ha-full/HeavyArmory-WACCF-CCOR_patch.esp" destination="HeavyArmory-WACCF-CCOR_patch.esp" priority="0" />
				</files>
			</pattern>
			<pattern>
				<dependencies operator="And">
					<flagDependency flag="ha-waccf" value="On"/>
					<flagDependency flag="ha-ccor" value="On"/>
					<flagDependency flag="ha-lite" value="On"/>
				</dependencies>
				<files>
					<file source="patches/waccf-ccor/ha-lite/HeavyArmory-WACCF-CCOR_patch.esp" destination="HeavyArmory-WACCF-CCOR_patch.esp" priority="0" />
				</files>
			</pattern>

		</patterns>
	</conditionalFileInstalls>
</config>
